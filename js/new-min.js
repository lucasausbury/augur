function flatten(e,t){var a=[];if(0==e.name.length)return[];a.push([e.name,t,e.books]);for(var r in e.children){var o=flatten(e.children[r],e.name);for(var n in o)a.push(o[n])}return a}function get_feed(e,t){void 0===e&&(e=[]),void 0===t&&(t=function(){});var a={};a.categories=e,$.ajax({url:"/feed/",data:a,type:"post",cache:!0,error:function(e,t){alert(e.responseText)},success:function(e){t(e)}})}function isAction(e){return"function"==typeof window[e]}augur={},get_feed(["Books"],function(e){function t(){$.ajax({url:"/data/categories.json",type:"get",cache:!0,success:function(e){d=flatten(e,null),console.log(d[12680]),augur.tree={},augur.tree.data=new google.visualization.DataTable,augur.tree.data.addColumn("string","ID"),augur.tree.data.addColumn("string","Parent"),augur.tree.data.addColumn("string","Number Of Books"),augur.tree.data.addRows(d),augur.tree.options={highlightOnMouseOver:!0,maxDepth:1,maxPostDepth:2,minHighlightColor:"#8c6bb1",midHighlightColor:"#9ebcda",maxHighlightColor:"#edf8fb",minColor:"#009688",midColor:"#f7f7f7",maxColor:"#ee8100",headerHeight:15,showScale:!0,height:500,useWeightedAverageForAggregation:!0},augur.tree.chart=new google.visualization.TreeMap(document.getElementById("treemap")),augur.tree.draw(augur.tree.data,augur.tree.options)}}),e.books.unshift(["Price","Sales rank"]);var t=google.visualization.arrayToDataTable(e.books);augur.scatter={options:{title:"Price vs. Sales rank",hAxis:{title:"Price",minValue:0,format:"currency"},vAxis:{title:"Sales rank",minValue:0,direction:-1},legend:"none"}},augur.scatter.chart=new google.visualization.ScatterChart(document.getElementById("scatter")),augur.scatter.chart.draw(t,augur.scatter.options)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(t)}),$(document).ready(function(){$(document).trigger("hashchange")}),$(document).on("hashchange",function(e){var t=window.location.hash.substring(1);isAction(t)&&window[t]($(this),e)}),$(document).on("click",'a[href^="#"]',function(e){var t=$(this).attr("href").substring(1);isAction(t)&&(e.preventDefault(),window[t]($(this),e))});